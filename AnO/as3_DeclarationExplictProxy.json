{
  "Common": {
    "class": "Tenant",
    "Shared": {
      "class": "Application",
      "template": "shared",
      "serviceAddress": {
        "class": "Service_Address",
        "virtualAddress": "0.0.0.0"
      },
      "tcp_profile_opt28": {
        "class": "TCP_Profile",
        "tcpOptions":[
          {"option": 28,"when": "first"}
        ],
        "initCwnd": 10,
        "initRwnd": 10
      },
      "srcipToDatagroup": {
        "class": "Data_Group",
        "keyDataType": "ip",
        "records": [
           {
               "key": "10.0.0.0/8",
               "value": "local_vpc_datagroup"
           },
           {
               "key": "10.21.21.0/27",
               "value": "us-east-1_123456_datagroup"
           },
           {
            "key": "104.219.105.84/32",
            "value": "us-east-1_123456_datagroup"
           }
       ]
      },
      "local_vpc_datagroup": {
           "class": "Data_Group",
           "keyDataType": "string",
           "records": [
               {
                   "key": "*.ubuntu.com",
                   "value": "all_uris"
               },
               {
                "key": "*.ubuntu.com",
                "value": "all_uris"
               }
           ]
      },
      "us-east-1_123456_datagroup": {
           "class": "Data_Group",
           "keyDataType": "string",
           "records": [
               {
                   "key": "f5.com",
                   "value": "all_uris"
               },
               {
                   "key": "udf.f5.com",
                   "value": "all_uris"
               }
           ]
      },
      "us-east-1_654321_datagroup": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
            {
                "key": "noh",
                "value": "all_uris"
            },
            {
              "key": "method",
              "value": "GET,POST"
            },
            {
              "key": "contentLenMin",
              "value": "310000"
            },
            {
              "key": "contentLenMax",
              "value": "320000"
            },
            {
              "key": "ipi",
              "value": "true"
            }
        ]
      },
      "noh_options": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
            {
                "key": "noh",
                "value": "noh_options"
            }
        ]
      },
      "proxyFilterHeaderToDatagroup": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
        ]
      },
      "sharedDatagroup": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
          {
            "key": "shared",
            "value": "shared_datagroup"
          }
        ]
      },
      "explicitPxy_bypass": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
          {"key": "example.com"},
          {"key": "f5.com"},
          {"key": "cisco.com"}
        ]
      },
      "all_uris": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
          {
            "key": "/"
          }
        ]
      },
      "shared_datagroup": {
        "class": "Data_Group",
        "keyDataType": "string",
        "records": [
          {"key": "/"}
        ]
      },
      "explicitProxy_irule": {
        "class": "iRule",
        "iRule": {
          "base64": "d2hlbiBSVUxFX0lOSVQgewogICAgc2V0IHN0YXRpYzo6YWxsb3dQcm94eVYxIDAKICAgIHNldCBzdGF0aWM6OmFsbG93UHJveHlWMiAxCiAgICBzZXQgc3RhdGljOjphbGxvd05vUHJveHkgMAogICAgc2V0IHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyAwOyAjIGlmIHRoaXMgaXMgc2V0IHRvIDEgYWRkaXRpb25hbCBjb25kaXRpb25hbCBsb2dnaW5nIHdpbGwgYmUgZW5hYmxlZC4KfQp3aGVuIENMSUVOVF9BQ0NFUFRFRCB7CiAgICBzZXQgaHNscHJveHkgW0hTTDo6b3BlbiAtcHJvdG8gVENQIC1wb29sIFNoYXJlZC90ZWxlbWV0cnlfcG9vbF0KICAgIHNldCBoc2xfcHJveHljbGllbnRBY2NlcHQgImxvZ1R5cGU9XCJwcm94eUxvZ1wiLGV2ZW50VGltZXN0YW1wPVwiW2Nsb2NrIGZvcm1hdCBbY2xvY2sgc2Vjb25kc10gLWZvcm1hdCAiJWEsICVkICVoICVZICVUIEdNVCIgLWdtdCAxXVwiLGJpZ2lwSG9zdG5hbWU9XCIkc3RhdGljOjp0Y2xfcGxhdGZvcm0obWFjaGluZSlcIixjbGllbnRJcD1cIltJUDo6cmVtb3RlX2FkZHIgY2xpZW50c2lkZV1cIixjbGllbnRQb3J0PVwiW1RDUDo6Y2xpZW50X3BvcnRdXCIscHJveHlJcD1cIltJUDo6bG9jYWxfYWRkciBjbGllbnRzaWRlXVwiLHByb3h5UG9ydD1cIltUQ1A6OmxvY2FsX3BvcnQgY2xpZW50c2lkZV1cIix2aXJ0dWFsTmFtZT1cIlt2aXJ0dWFsIG5hbWVdXCIsYnl0ZXNUb0NsaWVudD1cIltJUDo6c3RhdHMgYnl0ZXMgb3V0XVwiLGJ5dGVzVG9Qcm94eT1cIltJUDo6c3RhdHMgYnl0ZXMgaW5dXCIiCiAgICBUQ1A6OmNvbGxlY3QKfQp3aGVuIFNFUlZFUl9JTklUIHsKICAgIGlmIHtbaW5mbyBleGlzdHMgdjJfc291cmNlQWRkcmVzc119ewogICAgICAgIHNjYW4gJHYyX3NvdXJjZUFkZHJlc3MgeyVkLiVkLiVkLiVkLn0gYSBiIGMgZAogICAgICAgIGlmIHskY3VzdEh0dHBIZWFkZXIgIT0gIiJ9IHsKICAgICAgICAgICAgc2NhbiAkY3VzdEh0dHBIZWFkZXIgeyVbXjpdOiVbXjpdOiVzfSA2YSA2YiA2YwogICAgICAgICAgICBUQ1A6Om9wdGlvbiBzZXQgMjggW2JpbmFyeSBmb3JtYXQgY2NjY2NIMTIgezF9ICRhICRiICRjICRkICQ2YSQ2YiQ2Y10gYWxsCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBUQ1A6Om9wdGlvbiBzZXQgMjggW2JpbmFyeSBmb3JtYXQgY2NjY2MgezF9ICRhICRiICRjICRkXSBhbGwKICAgICAgICB9CiAgICB9Cn0Kd2hlbiBDTElFTlRfREFUQSB7CiAgICBiaW5hcnkgc2NhbiBbVENQOjpwYXlsb2FkIDEyXSBIKiB2Ml9wcm90b2NvbF9zaWcKICAgIGlmIHskc3RhdGljOjphbGxvd1Byb3h5VjEgJiYgW1RDUDo6cGF5bG9hZCAwIDVdIGVxICJQUk9YWSJ9IHsKICAgICAgICBzZXQgcHJveHlfc3RyaW5nIFtUQ1A6OnBheWxvYWRdCiAgICAgICAgc2V0IHByb3h5X3N0cmluZ19sZW5ndGggW2V4cHIge1tzdHJpbmcgZmlyc3QgIlxyIiBbVENQOjpwYXlsb2FkXV0gKyAyfV0KICAgICAgICBzY2FuICRwcm94eV9zdHJpbmcge1BST1hZIFRDUCVzJXMlcyVzJXN9IHRjcHZlciBzcmNhZGRyIGRzdGFkZHIgc3JjcG9ydCBkc3Rwb3J0CiAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdFByb3h5X2RlYnVnIH0ge2xvZyBsb2NhbDAuZGVidWcgIlByb3h5IFByb3RvY29sIHYxIGNvbm4gZnJvbSBbSVA6OmNsaWVudF9hZGRyXTpbVENQOjpjbGllbnRfcG9ydF0gZm9yIGFuIElQdiR0Y3B2ZXIgc3RyZWFtIGZyb20gU3JjOiAkc3JjYWRkcjokc3JjcG9ydCB0byBEc3Q6ICRkc3RhZGRyOiRkc3Rwb3J0In0KICAgICAgICBUQ1A6OnBheWxvYWQgcmVwbGFjZSAwICRwcm94eV9zdHJpbmdfbGVuZ3RoICIiCiAgICB9IGVsc2VpZiB7JHN0YXRpYzo6YWxsb3dQcm94eVYyICYmICR2Ml9wcm90b2NvbF9zaWcgZXEgIjBkMGEwZDBhMDAwZDBhNTE1NTQ5NTQwYSJ9ewogICAgICAgIGJpbmFyeSBzY2FuIFtUQ1A6OnBheWxvYWRdIEAxMkgqIHYyX3Byb3h5aGVhZGVycmVtYWluZGVyCiAgICAgICAgYmluYXJ5IHNjYW4gW1RDUDo6cGF5bG9hZF0gQDEySDJIKiB2Ml92ZXJDb21tYW5kIHYyX3JlbWFpbmRlcgogICAgICAgIGlmIHskdjJfdmVyQ29tbWFuZCA9PSAyMX17CiAgICAgICAgICAgIGJpbmFyeSBzY2FuIFtUQ1A6OnBheWxvYWRdIEAxM0gyIHYyX2FkZHJlc3NGYW1pbHlUcmFuc3BvcnRQcm90b2NvbAogICAgICAgICAgICBpZiB7JHYyX2FkZHJlc3NGYW1pbHlUcmFuc3BvcnRQcm90b2NvbCA9PSAxMX0gewogICAgICAgICAgICAgICAgYmluYXJ5IHNjYW4gW1RDUDo6cGF5bG9hZF0gQDE2Y2NjY2NjY2NTUyB2Ml9zb3VyY2VBZGRyZXNzMSB2Ml9zb3VyY2VBZGRyZXNzMiB2Ml9zb3VyY2VBZGRyZXNzMyB2Ml9zb3VyY2VBZGRyZXNzNCB2Ml9kZXN0QWRkcmVzczEgdjJfZGVzdEFkZHJlc3MyIHYyX2Rlc3RBZGRyZXNzMyB2Ml9kZXN0QWRkcmVzczQgdjJfc291cmNlUG9ydDEgdjJfZGVzdFBvcnQxCiAgICAgICAgICAgICAgICBzZXQgdjJfc291cmNlQWRkcmVzcyAiW2V4cHIgeyR2Ml9zb3VyY2VBZGRyZXNzMSAmIDB4ZmZ9XS5bZXhwciB7JHYyX3NvdXJjZUFkZHJlc3MyICYgMHhmZn1dLltleHByIHskdjJfc291cmNlQWRkcmVzczMgJiAweGZmfV0uW2V4cHIgeyR2Ml9zb3VyY2VBZGRyZXNzNCAmIDB4ZmZ9XSIKICAgICAgICAgICAgICAgIHNldCB2Ml9kZXN0QWRkcmVzcyAiW2V4cHIgeyR2Ml9kZXN0QWRkcmVzczEgJiAweGZmfV0uW2V4cHIgeyR2Ml9kZXN0QWRkcmVzczIgJiAweGZmfV0uW2V4cHIgeyR2Ml9kZXN0QWRkcmVzczMgJiAweGZmfV0uW2V4cHIgeyR2Ml9kZXN0QWRkcmVzczQgJiAweGZmfV0iCiAgICAgICAgICAgICAgICBzZXQgdjJfc291cmNlUG9ydCBbZXhwciB7JHYyX3NvdXJjZVBvcnQxICYgMHhmZmZmfV0KICAgICAgICAgICAgICAgIHNldCB2Ml9kZXN0UG9ydCBbZXhwciB7JHYyX2Rlc3RQb3J0MSAmIDB4ZmZmZn1dCiAgICAgICAgICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0UHJveHlfZGVidWcgfSB7IGxvZyAiUHJveHkgUHJvdG9jb2wgdjIgY29ubiBmcm9tIFtJUDo6Y2xpZW50X2FkZHJdOltUQ1A6OmNsaWVudF9wb3J0XSBmb3IgYW4gSVB2NCBTdHJlYW0gZnJvbSBTcmM6ICR2Ml9zb3VyY2VBZGRyZXNzOiR2Ml9zb3VyY2VQb3J0IHRvIERzdDogJHYyX2Rlc3RBZGRyZXNzOiR2Ml9kZXN0UG9ydCJ9CiAgICAJCQliaW5hcnkgc2NhbiBbVENQOjpwYXlsb2FkXSBAMTRTIGFkZHJlc3Nfc2l6ZQogICAgCQkJc2V0IHNraXBfYnl0ZXMgW2V4cHIgMTYgKyAkYWRkcmVzc19zaXplXQogICAgICAgICAgICAgICAgVENQOjpwYXlsb2FkIHJlcGxhY2UgMCAkc2tpcF9ieXRlcyAiIgogICAgICAgICAgICB9IGVsc2VpZiB7JHYyX2FkZHJlc3NGYW1pbHlUcmFuc3BvcnRQcm90b2NvbCA9PSAyMX0gewogICAgICAgICAgICAgICAgYmluYXJ5IHNjYW4gW1RDUDo6cGF5bG9hZF0gQDE2SDRINEg0SDRINEg0SDRINCB2Ml92NnNvdXJjZUFkZHJlc3MxIHYyX3Y2c291cmNlQWRkcmVzczIgdjJfdjZzb3VyY2VBZGRyZXNzMyB2Ml92NnNvdXJjZUFkZHJlc3M0IHYyX3Y2c291cmNlQWRkcmVzczUgdjJfdjZzb3VyY2VBZGRyZXNzNiB2Ml92NnNvdXJjZUFkZHJlc3M3IHYyX3Y2c291cmNlQWRkcmVzczgKICAgICAgICAgICAgICAgIGJpbmFyeSBzY2FuIFtUQ1A6OnBheWxvYWRdIEAzMkg0SDRINEg0SDRINEg0SDQgdjJfdjZkZXN0QWRkcmVzczEgdjJfdjZkZXN0QWRkcmVzczIgdjJfdjZkZXN0QWRkcmVzczMgdjJfdjZkZXN0QWRkcmVzczQgdjJfdjZkZXN0QWRkcmVzczUgdjJfdjZkZXN0QWRkcmVzczYgdjJfdjZkZXN0QWRkcmVzczcgdjJfdjZkZXN0QWRkcmVzczgKICAgICAgICAgICAgICAgIGJpbmFyeSBzY2FuIFtUQ1A6OnBheWxvYWRdIEA0OFNTIHYyX3Y2c291cmNlUG9ydDEgdjJfdjZkZXN0UG9ydDEKICAgICAgICAgICAgICAgIHNldCB2Ml92NnNvdXJjZVBvcnQgW2V4cHIgeyR2Ml92NnNvdXJjZVBvcnQxICYgMHhmZmZmfV0KICAgICAgICAgICAgICAgIHNldCB2Ml92NmRlc3RQb3J0IFtleHByIHskdjJfdjZkZXN0UG9ydDEgJiAweGZmZmZ9XQogICAgICAgICAgICAgICAgc2V0IHYyX3Y2c291cmNlQWRkcmVzcyAiJHYyX3Y2c291cmNlQWRkcmVzczE6JHYyX3Y2c291cmNlQWRkcmVzczI6JHYyX3Y2c291cmNlQWRkcmVzczM6JHYyX3Y2c291cmNlQWRkcmVzczQ6JHYyX3Y2c291cmNlQWRkcmVzczU6JHYyX3Y2c291cmNlQWRkcmVzczY6JHYyX3Y2c291cmNlQWRkcmVzczc6JHYyX3Y2c291cmNlQWRkcmVzczgiCiAgICAgICAgICAgICAgICBzZXQgdjJfdjZkZXN0QWRkcmVzcyAiJHYyX3Y2ZGVzdEFkZHJlc3MxOiR2Ml92NmRlc3RBZGRyZXNzMjokdjJfdjZkZXN0QWRkcmVzczM6JHYyX3Y2ZGVzdEFkZHJlc3M0OiR2Ml92NmRlc3RBZGRyZXNzNTokdjJfdjZkZXN0QWRkcmVzczY6JHYyX3Y2ZGVzdEFkZHJlc3M3OiR2Ml92NmRlc3RBZGRyZXNzOCIKICAgICAgICAgICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyB9IHsgbG9nICJQcm94eSBQcm90b2NvbCB2MiBjb25uIGZyb20gZnJvbSBbSVA6OmNsaWVudF9hZGRyXTpbVENQOjpjbGllbnRfcG9ydF0gZm9yIGFuIElQdjYgU3RyZWFtIGZyb20gU3JjOiAkdjJfdjZzb3VyY2VBZGRyZXNzOiR2Ml92NnNvdXJjZVBvcnQgdG8gRHN0OiAkdjJfdjZkZXN0QWRkcmVzczokdjJfdjZkZXN0UG9ydCJ9CiAgICAJCQliaW5hcnkgc2NhbiBbVENQOjpwYXlsb2FkXSBAMTRTIGFkZHJlc3Nfc2l6ZQogICAgCQkJc2V0IHNraXBfYnl0ZXMgW2V4cHIgMTYgKyAkYWRkcmVzc19zaXplXQogICAgICAgICAgICAgICAgVENQOjpwYXlsb2FkIHJlcGxhY2UgMCAkc2tpcF9ieXRlcyAiIgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdFByb3h5X2RlYnVnIH0ge2xvZyBsb2NhbDAuY3JpdCAidjJfcHJveHkgY29ubiBmcm9tIFtJUDo6Y2xpZW50X2FkZHJdOltUQ1A6OmNsaWVudF9wb3J0XSAtIHBvc3NpYmxlIHVua25vd24vbWFsZm9ybWVkIHRyYW5zcG9ydFByb3RvY29sIG9yIGFkZHJlc3NGYW1pbHkifQogICAgICAgICAgICAgICAgcmVqZWN0CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2VpZiB7JHYyX3ZlckNvbW1hbmQgPT0gMjB9ewogICAgICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0UHJveHlfZGVidWcgfSB7IGxvZyAiUHJveHkgUHJvdG9jb2wgdjIgYW5kIExPQ0FMIGNvbW1hbmQgZnJvbSBbSVA6OmNsaWVudF9hZGRyXTpbVENQOjpjbGllbnRfcG9ydF07IHNraXBwaW5nIn0KCQkJYmluYXJ5IHNjYW4gW1RDUDo6cGF5bG9hZF0gQDE0UyBhZGRyZXNzX3NpemUKCQkJc2V0IHNraXBfYnl0ZXMgW2V4cHIgMTYgKyAkYWRkcmVzc19zaXplXQogICAgICAgICAgICBUQ1A6OnBheWxvYWQgcmVwbGFjZSAwICRza2lwX2J5dGVzICIiCiAgICAgICAgICAgIGJpbmFyeSBzY2FuIFtUQ1A6OnBheWxvYWRdIEgqIGxvY2FsX3JlbWFpbmRlcgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyB9IHtsb2cgbG9jYWwwLmNyaXQgIlByb3h5IFByb3RvY29sIFByb3RvY29sIFNpZ25hdHVyZSBEZXRlY3RlZCBmcm9tIFtJUDo6Y2xpZW50X2FkZHJdOltUQ1A6OmNsaWVudF9wb3J0XSBidXQgcHJvdG9jb2wgdmVyc2lvbiBhbmQgY29tbWFuZCBub3QgbGVnYWw7IGNvbm5lY3Rpb24gcmVzZXQifQogICAgICAgICAgICByZWplY3QKICAgICAgICB9CiAgICB9IGVsc2VpZiB7JHN0YXRpYzo6YWxsb3dOb1Byb3h5fSB7CiAgICAgICAgIyBUaGlzIGVsc2VpZiBjYW4gYmUgcmVtb3ZlZAogICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyB9IHsgbG9nIGxvY2FsMC5jcml0ICJDb25uZWN0aW9uIGZyb20gW0lQOjpjbGllbnRfYWRkcl06W1RDUDo6Y2xpZW50X3BvcnRdIGFsbG93ZWQgZGVzcGl0ZSBsYWNrIG9mIFBST1hZIHByb3RvY29sIGhlYWRlciJ9CiAgICB9IGVsc2UgewogICAgICAgIHJlamVjdAogICAgICAgIGxvZyBsb2NhbDAuY3JpdCAiQ29ubmVjdGlvbiByZWplY3RlZCBmcm9tIFtJUDo6Y2xpZW50X2FkZHJdOltUQ1A6OmNsaWVudF9wb3J0XSBkdWUgdG8gbGFjayBvZiBQUk9YWSBwcm90b2NvbCBoZWFkZXIiCiAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdFByb3h5X2RlYnVnIH0ge2xvZyBsb2NhbDAuZGVidWcgIlRDUCBwYXlsb2FkOiBbVENQOjpwYXlsb2FkXSJ9CiAgICB9CiAgICBUQ1A6OnJlbGVhc2UKfQp3aGVuIEhUVFBfUFJPWFlfUkVRVUVTVCB7CiAgICBzZXQgNDAzcmVzcG9uc2UgMAogICAgc2V0IHNoYXJlZFRyYWZmaWMgInNoYXJlZCIKICAgIGlmIHtbSFRUUDo6aG9zdF0gPT0gIiJ9IHsKICAgICAgICBIVFRQOjpoZWFkZXIgcmVwbGFjZSBIb3N0IFtIVFRQOjp1cmldCiAgICAgICAgfQogICAgc2V0IGhzbF9wcm94eWh0dHBQcm94eVJlcSAidXJsPVwiW2dldGZpZWxkIFtIVFRQOjpob3N0XSAiOiIgMV1cIixwb3J0UmVxQnlDbGllbnQ9XCJbVVJJOjpwb3J0IFtIVFRQOjp1cmldXVwiLGh0dHBIb3N0PVwiW0hUVFA6OnVyaV1cIixodHRwTWV0aG9kPVwiW0hUVFA6Om1ldGhvZF1cIixodHRwVmVyc2lvbj1cIltIVFRQOjp2ZXJzaW9uXVwiIgogICAgc2V0IGhvc3RQb3J0IFtnZXRmaWVsZCBbSFRUUDo6aG9zdF0gIjoiIDJdCiAgICBzZXQgY3VzdEh0dHBIZWFkZXIgW0hUVFA6OmhlYWRlciB2YWx1ZSAicHJveHlVVUlEIl0KICAgIGlmIHtbc3RyaW5nIHRyaW0gJGhvc3RQb3J0XSAhPSAiIn0gewogICAgICAgICMgUG9ydCBpcyBwYXJ0IG9mIHRoZSBIT1NUIGhlYWRlciwgbm8gYWN0aW9uIGlzIG5lZWRlZAogICAgfSBlbHNlIHsKICAgICAgICBzZXQgaG9zdFBvcnQgNDQzCiAgICAgICAgIyBUaGlzIGlzIGJlaW5nIGRvbmUgdG8gaGFuZGxlIGEgc2NlbmFyaW8gcmVsYXRlZCB0byBmb3JtMyB3aGVyZSBpbiB0aGUgQ09OTkVDVCBwaGFzZSB0aGUKICAgICAgICAjIEhPU1QgZG9lcyBub3QgaGF2ZSB0aGUgcG9ydCBpbmZvcm1hdGlvbiBwcm92aWRlZCBhcyByZXF1aXJlZCBieSB0aGUgUkZDOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMSNzZWN0aW9uLTQuMy42CiAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdFByb3h5X2RlYnVnIH0geyBsb2cgbG9jYWwwLndhcm5pbmcgIkhvc3QgcG9ydCBpcyBudWxsLiBTZXR0aW5nIGl0IHRvIDQ0MyBmb3IgaG9zdDogW2dldGZpZWxkIFtzdHJpbmcgdG9sb3dlciBbSFRUUDo6aG9zdF1dICI6IiAxXSJ9CiAgICB9CiAgICAjSWYgY2xpZW50IGluc2VydGVkIGEgY3VzdG9tZXIgaGVhZGVyLCBwcm94eVVVSUQsIHVzZSB0aGUgdmFsdWUgb2YgaGVhZGVyIGZvciB1cGNvbWluZyBsb2dpYywgaWYgbm90IHVzZSBJUCBhZGRyZXNzIGZyb20gdjIgaGVhZGVyCiAgICBpZiB7ICRjdXN0SHR0cEhlYWRlciAhPSAiIn0gewogICAgICAgc2V0IHNvdXJjZUNsaWVudCAkY3VzdEh0dHBIZWFkZXIKICAgICAgIHNldCBjdXN0b21IZWFkZXIgMQogICAgfQogICAgZWxzZSB7CiAgICAgICBzZXQgc291cmNlQ2xpZW50ICR2Ml9zb3VyY2VBZGRyZXNzCiAgICAgICBzZXQgY3VzdG9tSGVhZGVyIDAKICAgIH0KICAgIGlmIHsgKFtIVFRQOjp1cmldIGNvbnRhaW5zICJqbmRpOmxkYXAiKSB8fCAoW0hUVFA6OnVyaV0gY29udGFpbnMgImpuZGklM0FsZGFwIikgfSB7CiAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgICAgICBzZXQgaHNsX3Byb3h5d2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkRFTklFRCBkdWUgdG8gTERBUCByZXF1ZXN0XCIiCiAgICAgICAgSFNMOjpzZW5kICRoc2xwcm94eSAiQXBhY2hlIExvZzRqIHZ1bG5lcmFiaWxpdHkgcHJldmVudGlvbiBmaXguIgogICAgfQogICAgIyAxLiBDaGVjayBpZiB0aGlzIGlzIGEgbm9oIHVzZSBjYXNlCiAgICAjIDEuIENoZWNrIGlmIHNvdXJjZUNsaWVudCBleGlzdHMKICAgICMgMi4gQ2hlY2sgaWYgY3VzdG9tSGVhZGVyIGV4aXN0cywgaWYgeWVzIHNldCB0aGUgc3JjRGF0YWdyb3VwCiAgICAjIDMuIElmIG5vLCB0aGVuIGNoZWNrIGlmIHRoZSBzb3VyY2VDbGllbnQgZXhpc3RzIGluIHRoZSBzaGFyZWQgY2lkciBkYXRhZ3JvdXAgKHNyY2lwVG9EYXRhZ3JvdXApCiAgICAjIDQuIElmIG5vLCB0aGVuIGNoZWNrIGlmIHRoZSBob3N0bmFtZSBleGlzdHMgaW4gU2hhcmVkL2V4cGxpY2l0UHh5X2J5cGFzcwogICAgIyA1LiBJZiBubywgdGhlbiBjaGVjayBpZiB0aGUgaG9zdG5hbWUgZXhpc3RzIGluIHRoZSBTaGFyZWQvc2hhcmVkX2RhdGFncm91cAogICAgaWYge1tpbmZvIGV4aXN0cyBzb3VyY2VDbGllbnRdfSB7CiAgICAgICAgaWYgeyRjdXN0b21IZWFkZXIgPT0gMX17CiAgICAgICAgICAgIHNldCBzcmNEYXRhZ3JvdXAgW2NsYXNzIG1hdGNoIC12YWx1ZSAkc291cmNlQ2xpZW50IGVxdWFscyBTaGFyZWQvcHJveHlGaWx0ZXJIZWFkZXJUb0RhdGFncm91cF0KICAgICAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0UHJveHlfZGVidWcgfSB7bG9nIGxvY2FsMC5kZWJ1ZyAic291cmNlIHZhcmlhYmxlIEhUVFBTOiAkc291cmNlQ2xpZW50In0KICAgICAgICAgICAgc2V0IHNyY0RhdGFncm91cCBbY2xhc3MgbWF0Y2ggLXZhbHVlICRzb3VyY2VDbGllbnQgZXF1YWxzIFNoYXJlZC9zcmNpcFRvRGF0YWdyb3VwXQogICAgICAgIH0KICAgICAgICAjIE1vdmVkIHVwIGFib3ZlLCAiaWYiIGNhbiBiZSBkZWxldGVkLCBMZW9uYXJkbyBjb21tZW50CiAgICAgICAgaWYgeyAoW0hUVFA6OnVyaV0gY29udGFpbnMgImpuZGk6bGRhcCIpIHx8IChbSFRUUDo6dXJpXSBjb250YWlucyAiam5kaSUzQWxkYXAiKSB9IHsKICAgICAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgICAgICAgICAgc2V0IGhzbF9wcm94eXdoaXRlbGlzdEhvc3QgIndoaXRlbGlzdEhvc3Q9XCJERU5JRUQgZHVlIHRvIExEQVAgcmVxdWVzdFwiIgogICAgICAgICAgICBIU0w6OnNlbmQgJGhzbHByb3h5ICJBcGFjaGUgTG9nNGogdnVsbmVyYWJpbGl0eSBwcmV2ZW50aW9uIGZpeC4iCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiB7W2NhdGNoICRzcmNEYXRhZ3JvdXBdfSB7CiAgICAgICAgICAgICAgICBpZiB7ICRob3N0UG9ydCA9PSA0NDMgfSB7CiAgICAgICAgICAgICAgICAgICAgc2V0IGhvc3ROYW1lIFtnZXRmaWVsZCBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6Omhvc3RdXSAiOiIgMV0KICAgICAgICAgICAgICAgICAgICBpZiB7W2NsYXNzIG1hdGNoICJub2giIGVxdWFscyBTaGFyZWQvJHNyY0RhdGFncm91cCBdfSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldCBoc2xfcHJveHl3aGl0ZWxpc3RIb3N0ICJ3aGl0ZWxpc3RIb3N0PVwiQUNDRVBURURcIiIKICAgICAgICAgICAgICAgICAgICAgICAgbG9nIGxvY2FsMC5kZWJ1ZyAic291cmNlIGRhdGFncm91cCBtYXRjaCB3YXMgbm9oIHVzZSBjYXNlLCBhbGxvd2luZyBhbGwgaG9zdHM6ICRzcmNEYXRhZ3JvdXAiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiB7W2NsYXNzIG1hdGNoIFtnZXRmaWVsZCBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6Omhvc3RdXSAiOiIgMV0gZXF1YWxzIFNoYXJlZC8kc3JjRGF0YWdyb3VwIF19IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9wcm94eXdoaXRlbGlzdEhvc3QgIndoaXRlbGlzdEhvc3Q9XCJBQ0NFUFRFRFwiIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGRvdEluZGV4IFtzdHJpbmcgZmlyc3QgIi4iICRob3N0TmFtZSAwXQogICAgICAgICAgICAgICAgICAgICAgICBzZXQgc3Rhckhvc3ROYW1lIFtzdHJpbmcgcmVwbGFjZSAkaG9zdE5hbWUgMCAkZG90SW5kZXggIiMuIl0KICAgICAgICAgICAgICAgICAgICAgICAgbG9nIGxvY2FsMC5pbmZvICJSRVBMQUNFRDogJHN0YXJIb3N0TmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgaWYge1tjbGFzcyBtYXRjaCAkc3Rhckhvc3ROYW1lIGVxdWFscyBTaGFyZWQvJHNyY0RhdGFncm91cCBdfSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgaHNsX3Byb3h5d2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkFDQ0VQVEVEXCIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgNDAzcmVzcG9uc2UgMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9wcm94eXdoaXRlbGlzdEhvc3QgIndoaXRlbGlzdEhvc3Q9XCJERU5JRURcIiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyB9IHtsb2cgbG9jYWwwLmluZm8gImNoZWNraW5nIGluIGV4cGxpY2l0UHh5X2J5cGFzcyBkYXRhZ3JvdXAifQogICAgICAgICAgICAgICAgaWYge1tjbGFzcyBtYXRjaCBbZ2V0ZmllbGQgW3N0cmluZyB0b2xvd2VyIFtIVFRQOjpob3N0XV0gIjoiIDFdIGVxdWFscyBTaGFyZWQvZXhwbGljaXRQeHlfYnlwYXNzIF19IHsKICAgICAgICAgICAgICAgICAgICBzZXQgaHNsX3Byb3h5d2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkFDQ0VQVEVEXCIiCiAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9wcm94eXdoaXRlbGlzdEhvc3QgImV4cGxpY2l0UHh5X2J5cGFzcz1cIlRydWVcIiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyB9IHtsb2cgbG9jYWwwLmluZm8gImNoZWNraW5nIGluIHNoYXJlZCBkYXRhZ3JvdXAifQogICAgICAgICAgICAgICAgICAgIHNldCBzaGFyZWRUcmFmZmljRGF0YWdyb3VwIFtjbGFzcyBtYXRjaCAtdmFsdWUgJHNoYXJlZFRyYWZmaWMgZXF1YWxzIFNoYXJlZC9zaGFyZWREYXRhZ3JvdXBdCiAgICAgICAgICAgICAgICAgICAgaWYge1tjYXRjaCAkc2hhcmVkVHJhZmZpY0RhdGFncm91cF19IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgeyAkaG9zdFBvcnQgPT0gNDQzIH0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhvc3ROYW1lIFtnZXRmaWVsZCBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6Omhvc3RdXSAiOiIgMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHtbY2xhc3MgbWF0Y2ggW2dldGZpZWxkIFtzdHJpbmcgdG9sb3dlciBbSFRUUDo6aG9zdF1dICI6IiAxXSBlcXVhbHMgU2hhcmVkLyRzaGFyZWRUcmFmZmljRGF0YWdyb3VwIF19IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgaHNsX3Byb3h5d2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkFDQ0VQVEVEXCIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgZG90SW5kZXggW3N0cmluZyBmaXJzdCAiLiIgJGhvc3ROYW1lIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IHN0YXJIb3N0TmFtZSBbc3RyaW5nIHJlcGxhY2UgJGhvc3ROYW1lIDAgJGRvdEluZGV4ICIjLiJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nIGxvY2FsMC5pbmZvICJSRVBMQUNFRDogJHN0YXJIb3N0TmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB7W2NsYXNzIG1hdGNoICRzdGFySG9zdE5hbWUgZXF1YWxzIFNoYXJlZC8kc2hhcmVkVHJhZmZpY0RhdGFncm91cCBdfSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBoc2xfcHJveHl3aGl0ZWxpc3RIb3N0ICJ3aGl0ZWxpc3RIb3N0PVwiQUNDRVBURURcIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCA0MDNyZXNwb25zZSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBoc2xfcHJveHl3aGl0ZWxpc3RIb3N0ICJ3aGl0ZWxpc3RIb3N0PVwiREVOSUVEXCIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzZXQgNDAzcmVzcG9uc2UgMQogICAgICAgICAgICAgICAgICAgICAgICBIU0w6OnNlbmQgJGhzbHByb3h5ICJBIG1hcHBpbmcgb2Ygc291cmNlIElQIHRvIGRhdGFncm91cCB3YXMgbm90IGZvdW5kLCByZXNwb25kaW5nIHdpdGggNDAzIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGVsc2UgewogICAgICAgIHNldCA0MDNyZXNwb25zZSAxCiAgICAgICAgSFNMOjpzZW5kICRoc2xwcm94eSAiVGhlIFByb3h5IHYyIGlSdWxlIGRpZCBub3QgcHJvZHVjZSBhIHNvdXJjZSBJUCwgdW5hYmxlIHRvIGFsbG93IHRyYWZmaWMsIHJlc3BvbmRpbmcgd2l0aCA0MDMiCiAgICB9CiAgICBpZiB7JDQwM3Jlc3BvbnNlID09IDF9IHsKICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0UHJveHlfZGVidWcgfSB7IGxvZyBsb2NhbDAuaW5mbyAiSG9zdG5hbWU6IFsgZ2V0ZmllbGQgW0hUVFA6Omhvc3RdICI6IiAxXSJ9CiAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdFByb3h5X2RlYnVnIH0ge2xvZyBsb2NhbDAuICJQb3J0OiBbIGdldGZpZWxkIFtIVFRQOjpob3N0XSAiOiIgMl0ifQogICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRQcm94eV9kZWJ1ZyB9IHsgbG9nIGxvY2FsMC4gIiRoc2xfcHJveHljbGllbnRBY2NlcHQgOiAkaHNsX3Byb3h5aHR0cFByb3h5UmVxIn0KICAgICAgICBIVFRQOjpjbG9zZQogICAgICAgIEhUVFA6OnJlc3BvbmQgNDAzCiAgICAgICAgc2V0IGhzbF9wcm94eXdoaXRlbGlzdEhvc3QgIndoaXRlbGlzdEhvc3Q9XCJERU5JRURcIiIKICAgIH0KICAgIEhTTDo6c2VuZCAkaHNscHJveHkgIiRoc2xfcHJveHljbGllbnRBY2NlcHQsJGhzbF9wcm94eWh0dHBQcm94eVJlcSwkaHNsX3Byb3h5d2hpdGVsaXN0SG9zdCIKICAgICNpZiB7ICRzdGF0aWM6OmV4cGxpY2l0UHJveHlfZGVidWcgfSB7IGxvZyBsb2NhbDAuICIkaHNsX3Byb3h5Y2xpZW50QWNjZXB0LCRoc2xfcHJveHlodHRwUHJveHlSZXEsJGhzbF9wcm94eXdoaXRlbGlzdEhvc3QifQp9"
        }
      },
      "explicitHttps_irule": {
        "class": "iRule",
        "iRule": {
          "base64": "d2hlbiBSVUxFX0lOSVQgewogICAgc2V0IHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyAwOyAjIGlmIHRoaXMgaXMgc2V0IHRvIDEgYWRkaXRpb25hbCBjb25kaXRpb25hbCBsb2dnaW5nIHdpbGwgYmUgZW5hYmxlZC4KICAgIHNldCBzdGF0aWM6OmNhdGVnb3JpZXNUb0Jsb2NrIHsiQm90bmV0cyIgIkNsb3VkIFByb3ZpZGVyIE5ldHdvcmtzIiAiRGVuaWFsIG9mIFNlcnZpY2UiICJJbGxlZ2FsIFdlYnNpdGVzIiAiSW5mZWN0ZWQgU291cmNlcyIgIlBoaXNoaW5nIiAiUHJveHkiICJTY2FubmVycyIgIlNwYW0gU291cmNlcyIgIldlYiBBdHRhY2tzIiAiV2luZG93cyBFeHBsb2l0cyJ9Cn0Kd2hlbiBDTElFTlRfQUNDRVBURUQgewogICAgc2V0IGhzbGh0dHBzIFtIU0w6Om9wZW4gLXByb3RvIFRDUCAtcG9vbCBTaGFyZWQvdGVsZW1ldHJ5X3Bvb2wyXQogICAgc2V0IGhzbF9odHRwc2NsaWVudEFjY2VwdCAibG9nVHlwZT1cImh0dHBzTG9nXCIsZXZlbnRUaW1lc3RhbXA9XCJbY2xvY2sgZm9ybWF0IFtjbG9jayBzZWNvbmRzXSAtZm9ybWF0ICIlYSwgJWQgJWggJVkgJVQgR01UIiAtZ210IDFdXCIsYmlnaXBIb3N0bmFtZT1cIiRzdGF0aWM6OnRjbF9wbGF0Zm9ybShtYWNoaW5lKVwiLGNsaWVudElwPVwiW0lQOjpyZW1vdGVfYWRkciBjbGllbnRzaWRlXVwiLGNsaWVudFBvcnQ9XCJbVENQOjpjbGllbnRfcG9ydF1cIix2aXJ0dWFsTmFtZT1cIlt2aXJ0dWFsIG5hbWVdXCIsYnl0ZXNUb0NsaWVudD1cIltJUDo6c3RhdHMgYnl0ZXMgb3V0XVwiLGJ5dGVzVG9Qcm94eT1cIltJUDo6c3RhdHMgYnl0ZXMgaW5dXCIiCiAgICBzZXQgb3B0MjggW1RDUDo6b3B0aW9uIGdldCAyOF0KICAgIGlmIHtbaW5mbyBleGlzdHMgb3B0MjhdfSB7CiAgICAgICAgYmluYXJ5IHNjYW4gJG9wdDI4IGNIOEgxMiB2ZXIgYWRkciB1dWlkYmluCiAgICAgICAgaWYge1tpbmZvIGV4aXN0cyB1dWlkYmluXX0gewogICAgICAgICAgICBzY2FuICRhZGRyICIlMnglMnglMnglMngiIGlwMSBpcDIgaXAzIGlwNAogICAgICAgICAgICBzZXQgdjJfc291cmNlQWRkcmVzcyAiJGlwMS4kaXAyLiRpcDMuJGlwNCIKICAgICAgICAgICAgc2NhbiAkdXVpZGJpbiAiJTRzJTRzJTRzIiB1dTEgdXUyIHV1MwogICAgICAgICAgICBzZXQgY3VzdFByb3h5SGVhZGVyICIkdXUxOiR1dTI6JHV1MyIKICAgICAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdEhUVFBTX2RlYnVnIH0ge2xvZyBsb2NhbDAuZGVidWcgIm9wdDI4IGNsaWVudCBhZGRyZXNzIGZyb20gcHJveHkgcHJvdG9jb2w6ICR2Ml9zb3VyY2VBZGRyZXNzOyBVVUlEOiAkY3VzdFByb3h5SGVhZGVyIn0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHNjYW4gJGFkZHIgIiUyeCUyeCUyeCUyeCIgaXAxIGlwMiBpcDMgaXA0CiAgICAgICAgICAgIHNldCB2Ml9zb3VyY2VBZGRyZXNzICIkaXAxLiRpcDIuJGlwMy4kaXA0IgogICAgICAgICAgICBzZXQgY3VzdFByb3h5SGVhZGVyICIiCiAgICAgICAgICAgICNpZiB7ICRzdGF0aWM6OmV4cGxpY2l0SFRUUFNfZGVidWcgfSB7IGxvZyBsb2NhbDAuZGVidWcgInYyX3NvdXJjZUFkZHJlc3M6ICR2Ml9zb3VyY2VBZGRyZXNzIn0KICAgICAgICB9CiAgICB9Cn0Kd2hlbiBDTElFTlRTU0xfSEFORFNIQUtFIHsKICAgIHNldCAgaHNsX2h0dHBzY2xpZW50c3NsaGFuZHNoYWtlICJDTElFTlRTU0xfSEFORFNIQUtFOiBzc2xDaXBoZXJOYW1lPVwiW1NTTDo6Y2lwaGVyIG5hbWVdXCIsc3NsQ2lwaGVyQml0cz1cIltTU0w6OmNpcGhlciBiaXRzXVwiLHNzbENpcGhlclZlcnNpb249XCJbU1NMOjpjaXBoZXIgdmVyc2lvbl1cIixzc2xDZXJ0VmFsaWQ9XCJbWDUwOTo6dmVyaWZ5X2NlcnRfZXJyb3Jfc3RyaW5nIFtTU0w6OnZlcmlmeV9yZXN1bHRdXVwiIgogICAgc2V0IGV4dF9jb3VudCBbU1NMOjpleHRlbnNpb25zIGNvdW50XQogICAgI2lmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHsgbG9nIGxvY2FsMC5kZWJ1ZyAiQ2xpZW50U1NMX0hhbmRzaGFrZSJ9Cn0Kd2hlbiBIVFRQX1JFUVVFU1QgewogICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdEhUVFBTX2RlYnVnIH0ge2xvZyBsb2NhbDAuZGVidWcgIltIVFRQOjpob3N0XSBIVFRQUzogJHYyX3NvdXJjZUFkZHJlc3MifQogICAgc2V0IDQwM3Jlc3BvbnNlIDAKICAgIHNldCB4ZmZQcm90byAiIgogICAgc2V0IHNoYXJlZFRyYWZmaWMgInNoYXJlZCIKICAgICNTZXQgWEZGIGhlYWRlcgogICAgaWYge1tpbmZvIGV4aXN0cyB2Ml9zb3VyY2VBZGRyZXNzXX0gewogICAgICAgIEhUVFA6OmhlYWRlciBpbnNlcnQgWC1Gb3J3YXJkZWQtRm9yICR2Ml9zb3VyY2VBZGRyZXNzCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBIVFRQOjpoZWFkZXIgaW5zZXJ0IFgtRm9yd2FyZGVkLUZvciAiIgogICAgfQogICAgaWYge1tUQ1A6OmxvY2FsX3BvcnRdID09IDQ0M30gewogICAgICAgIEhUVFA6OmhlYWRlciBpbnNlcnQgWC1Gb3J3YXJkZWQtUHJvdG8gaHR0cHMKICAgICAgICBzZXQgeGZmUHJvdG8gaHR0cHMKICAgIH0KICAgICNTZXQgb3B0aW9uYWwgc2VhbCBoZWFkZXIKICAgIHNldCBjdXN0SFRUUFNIZWFkZXIgW0hUVFA6OmhlYWRlciB2YWx1ZSAicHJveHlVVUlEIl0KICAgIHNldCBoc2xfaHR0cHNodHRwUmVxdWVzdCAidXJsPVwiaHR0cHM6Ly9bSFRUUDo6aG9zdF1bSFRUUDo6dXJpXVwiLHNlcnZlcklQPVwiW0lQOjpsb2NhbF9hZGRyXVwiLHNlcnZlclBvcnQ9XCJbVENQOjpsb2NhbF9wb3J0XVwiLGh0dHBNZXRob2Q9XCJbSFRUUDo6bWV0aG9kXVwiLGh0dHBWZXJzaW9uPVwiW0hUVFA6OnZlcnNpb25dXCIsaHR0cFVyaT1cIltIVFRQOjp1cmldXCIsaHR0cFF1ZXJ5PVwiW0hUVFA6OnF1ZXJ5XVwiLGhlYWRlckhvc3Q9XCJbSFRUUDo6aG9zdF1cIixoZWFkZXJYZmY9XCJbSFRUUDo6aGVhZGVyIFgtRm9yd2FyZGVkLUZvcl1cIixoZWFkZXJDb250ZW50VHlwZT1cIltIVFRQOjpoZWFkZXIgQ29udGVudC1UeXBlXVwiLGhlYWRlclJlZmVyZXI9XCJbSFRUUDo6aGVhZGVyIFJlZmVyZXJdXCIsaGVhZGVyVXNlckFnZW50PVwiW0hUVFA6OmhlYWRlciBVc2VyLUFnZW50XVwiLGhlYWRlclhmUHJvdG89XCIkeGZmUHJvdG9cIiIKICAgICNVc2UgY3VzdG9tIGhlYWRlciBpZiBub3QgdXNlIElQIGFkZHJlc3MKICAgIGlmIHskY3VzdFByb3h5SGVhZGVyICE9ICIifSB7CiAgICAgICBzZXQgc291cmNlQ2xpZW50ICRjdXN0UHJveHlIZWFkZXIKICAgICAgIHNldCBjdXN0b21IZWFkZXIgMQogICAgfQogICAgZWxzZWlmIHskY3VzdEhUVFBTSGVhZGVyICE9ICIifSB7CiAgICAgICBzZXQgc291cmNlQ2xpZW50ICRjdXN0UHJveHlIZWFkZXIKICAgICAgIHNldCBjdXN0b21IZWFkZXIgMQogICAgfQogICAgZWxzZSB7CiAgICAgICBzZXQgc291cmNlQ2xpZW50ICR2Ml9zb3VyY2VBZGRyZXNzCiAgICAgICBzZXQgY3VzdG9tSGVhZGVyIDAKICAgIH0KICAgIGlmIHsgKFtIVFRQOjp1cmldIGNvbnRhaW5zICJqbmRpOmxkYXAiKSB8fCAoW0hUVFA6OnVyaV0gY29udGFpbnMgImpuZGklM0FsZGFwIikgfSB7CiAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgICAgICBIU0w6OnNlbmQgJGhzbGh0dHBzICJBcGFjaGUgTG9nNGogdnVsbmVyYWJpbGl0eSBwcmV2ZW50aW9uIGZpeC4iCiAgICB9CgogICAgaWYge1tpbmZvIGV4aXN0cyBzb3VyY2VDbGllbnRdfSB7CiAgICAgICAgaWYgeyRjdXN0b21IZWFkZXIgPT0gMX17CiAgICAgICAgICAgIHNldCBzcmNEYXRhZ3JvdXAgW2NsYXNzIG1hdGNoIC12YWx1ZSAkc291cmNlQ2xpZW50IGVxdWFscyBTaGFyZWQvcHJveHlGaWx0ZXJIZWFkZXJUb0RhdGFncm91cF0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmluZm8gInNvdXJjZSB2YXJpYWJsZSBIVFRQUzogJHNvdXJjZUNsaWVudCJ9CiAgICAgICAgICAgIHNldCBzcmNEYXRhZ3JvdXAgW2NsYXNzIG1hdGNoIC12YWx1ZSAkc291cmNlQ2xpZW50IGVxdWFscyBTaGFyZWQvc3JjaXBUb0RhdGFncm91cF0KICAgICAgICB9CiAgICAgICAgI2lmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmRlYnVnICJbSFRUUDo6aG9zdF0gc291cmNlIHZhcmlhYmxlIEhUVFBTOiAkc291cmNlQ2xpZW50LCBjdXN0b21IZWFkZXIgPSAkY3VzdG9tSGVhZGVyIHNvdXJjZSBkYXRhR3JvdXA6ICRzcmNEYXRhZ3JvdXAifQogICAgICAgIGlmIHtbaW5mbyBleGlzdHMgc3JjRGF0YWdyb3VwXX0gewogICAgICAgICAgICBpZiB7IChbSFRUUDo6dXJpXSBjb250YWlucyAiam5kaTpsZGFwIikgfHwgKFtIVFRQOjp1cmldIGNvbnRhaW5zICJqbmRpJTNBbGRhcCIpIH0gewogICAgICAgICAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgICAgICAgICAgICAgIEhTTDo6c2VuZCAkaHNsaHR0cHMgIkFwYWNoZSBMb2c0aiB2dWxuZXJhYmlsaXR5IHByZXZlbnRpb24gZml4LiIKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIHsgJHNyY0RhdGFncm91cCBuZSAiIiB9IHsKICAgICAgICAgICAgICAgICAgICBzZXQgaG9zdE5hbWUgW2dldGZpZWxkIFtzdHJpbmcgdG9sb3dlciBbSFRUUDo6aG9zdF1dICI6IiAxXQogICAgICAgICAgICAgICAgICAgIHNldCBnZXRfdXJpX2RhdGFncm91cCAgW2NsYXNzIG1hdGNoIC12YWx1ZSBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6Omhvc3RdXSBlcXVhbHMgU2hhcmVkLyRzcmNEYXRhZ3JvdXBdCiAgICAgICAgICAgICAgICAgICAgI2lmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmluZm8gIltIVFRQOjpob3N0XSB1cmkgZGF0YWdyb3VwOiAkZ2V0X3VyaV9kYXRhZ3JvdXAifQogICAgICAgICAgICAgICAgICAgIGlmIHtbaW5mbyBleGlzdHMgZ2V0X3VyaV9kYXRhZ3JvdXBdfSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHtbY2xhc3MgbWF0Y2ggIm5vaCIgZXF1YWxzIFNoYXJlZC8kc3JjRGF0YWdyb3VwIF19IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHtbY2xhc3MgbWF0Y2ggLXZhbHVlICJtZXRob2QiIGVxdWFscyBTaGFyZWQvJHNyY0RhdGFncm91cF0gY29udGFpbnMgW0hUVFA6Om1ldGhvZF0gfSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nIGxvY2FsMC4gIm1ldGhvZCBtYXRjaCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjaWYge1tIVFRQOjptZXRob2RdID09ICJHRVQifSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmRlYnVnICJub2ggdHJhZmZpYyBwcm92aXNpb25hbGx5IGFsbG93ZWQgYXMgcmVxdWVzdCBpcyBHRVQgbWV0aG9kIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgaHNsX2h0dHBzd2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkFDQ0VQVEVEXCIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9odHRwc3doaXRlbGlzdFVSSSAid2hpdGVsaXN0VVJJPVwiQUxMT1dFRFwiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHtbY2xhc3MgbWF0Y2ggLXZhbHVlICJpcGkiIGVxdWFscyBTaGFyZWQvJHNyY0RhdGFncm91cF0gY29udGFpbnMgInRydWUifSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZyBsb2NhbDAuICJJUEkgbWF0Y2hlZCB0cnVlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgaXBpX21hdGNoIFtJUDo6cmVwdXRhdGlvbiBbTEI6OnNlcnZlciBhZGRyXV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nIGxvY2FsMC4gIklQSSBjYXRlZ29yeSBtYXRjaDogJGlwaV9tYXRjaCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCBtYXRjaCAkaXBpX21hdGNoIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHtbbHNlYXJjaCAtZXhhY3QgJHN0YXRpYzo6Y2F0ZWdvcmllc1RvQmxvY2sgJG1hdGNoXSA+PSAwfSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0SFRUUFNfZGVidWcgfSB7bG9nIGxvY2FsMC5kZWJ1ZyAibm9oIHRyYWZmaWMgZGVuaWVkIGR1ZSB0byBJUCBpbnRlbGxpZ2VuY2UuIERlc3RpbmF0aW9uIElQIGFkZHJlc3MsIFtMQjo6c2VydmVyIGFkZHJdLCB3aGljaCBoYXMgYmVlbiBjYXRlZ29yaXplZCBhczogKCRpcGlfbWF0Y2gpLCByZXF1ZXN0IHdhcyByZWplY3RlZCJ9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSFNMOjpzZW5kICRoc2xodHRwcyAibm9oIHRyYWZmaWMgZGVuaWVkIGR1ZSB0byBJUCBpbnRlbGxpZ2VuY2UuIERlc3RpbmF0aW9uIElQIGFkZHJlc3MsIFtMQjo6c2VydmVyIGFkZHJdLCB3aGljaCBoYXMgYmVlbiBjYXRlZ29yaXplZCBhczogKCRpcGlfbWF0Y2gpLCByZXF1ZXN0IHdhcyByZWplY3RlZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiB7W2NsYXNzIG1hdGNoIFtzdHJpbmcgdG9sb3dlciBbSFRUUDo6aG9zdF1dIGVxdWFscyBTaGFyZWQvJHNyY0RhdGFncm91cF0gJiYgW2NsYXNzIG1hdGNoIFtzdHJpbmcgdG9sb3dlciBbSFRUUDo6dXJpXV0gc3RhcnRzX3dpdGggU2hhcmVkLyRnZXRfdXJpX2RhdGFncm91cF19IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiB7ICRzdGF0aWM6OmV4cGxpY2l0SFRUUFNfZGVidWcgfSB7bG9nIGxvY2FsMC5kZWJ1ZyAiW0hUVFA6Omhvc3RdIE1hdGNoZWQgd2hpdGVMaXN0In0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBoc2xfaHR0cHN3aGl0ZWxpc3RIb3N0ICJ3aGl0ZWxpc3RIb3N0PVwiQUNDRVBURURcIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBoc2xfaHR0cHN3aGl0ZWxpc3RVUkkgIndoaXRlbGlzdFVSST1cIkFMTE9XRURcIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNIVFRQOjpoZWFkZXIgaW5zZXJ0IFgtUmVhbC1JUCBbSVA6OnJlbW90ZV9hZGRyIGNsaWVudHNpZGVdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgZG90SW5kZXggW3N0cmluZyBmaXJzdCAiLiIgJGhvc3ROYW1lIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgc3Rhckhvc3ROYW1lIFtzdHJpbmcgcmVwbGFjZSAkaG9zdE5hbWUgMCAkZG90SW5kZXggIiMuIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZyBsb2NhbDAuaW5mbyAiUkVQTEFDRUQuOiAkc3Rhckhvc3ROYW1lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGdldF91cmlfZGF0YWdyb3VwICBbY2xhc3MgbWF0Y2ggLXZhbHVlIFtzdHJpbmcgdG9sb3dlciAkc3Rhckhvc3ROYW1lXSBlcXVhbHMgU2hhcmVkLyRzcmNEYXRhZ3JvdXBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB7W2NsYXNzIG1hdGNoIFtzdHJpbmcgdG9sb3dlciAkc3Rhckhvc3ROYW1lXSBlcXVhbHMgU2hhcmVkLyRzcmNEYXRhZ3JvdXBdICYmIFtjbGFzcyBtYXRjaCBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6OnVyaV1dIHN0YXJ0c193aXRoIFNoYXJlZC8kZ2V0X3VyaV9kYXRhZ3JvdXBdfSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmRlYnVnICJbSFRUUDo6aG9zdF0gTWF0Y2hlZCB3aGl0ZUxpc3QifQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBoc2xfaHR0cHN3aGl0ZWxpc3RIb3N0ICJ3aGl0ZWxpc3RIb3N0PVwiQUNDRVBURURcIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgaHNsX2h0dHBzd2hpdGVsaXN0VVJJICJ3aGl0ZWxpc3RVUkk9XCJBTExPV0VEXCIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI0hUVFA6OmhlYWRlciBpbnNlcnQgWC1SZWFsLUlQIFtJUDo6cmVtb3RlX2FkZHIgY2xpZW50c2lkZV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhTTDo6c2VuZCAkaHNsaHR0cHMgIkZhaWxlZCB0byBtYXRjaCBIb3N0IHdpdGggVVJJIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCA0MDNyZXNwb25zZSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhTTDo6c2VuZCAkaHNsaHR0cHMgIlVuYWJsZSB0byBtYXAgaG9zdG5hbWUgZGF0YWdyb3VwIHRvIFVSSSBkYXRhIGdyb3VwIgogICAgICAgICAgICAgICAgICAgICAgICBzZXQgNDAzcmVzcG9uc2UgMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZyBsb2NhbDAuaW5mbyAiY2hlY2tpbmcgaW4gc2hhcmVkIGRhdGFncm91cC4uIgogICAgICAgICAgICAgICAgICAgIHNldCBzaGFyZWRUcmFmZmljRGF0YWdyb3VwIFtjbGFzcyBtYXRjaCAtdmFsdWUgJHNoYXJlZFRyYWZmaWMgZXF1YWxzIFNoYXJlZC9zaGFyZWREYXRhZ3JvdXBdCiAgICAgICAgICAgICAgICAgICAgaWYge1tpbmZvIGV4aXN0cyBzaGFyZWRUcmFmZmljRGF0YWdyb3VwXX0gewogICAgICAgICAgICAgICAgICAgICAgICBpZiB7ICRzaGFyZWRUcmFmZmljRGF0YWdyb3VwIG5lICIiIH0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhvc3ROYW1lIFtnZXRmaWVsZCBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6Omhvc3RdXSAiOiIgMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBnZXRfdXJpX2RhdGFncm91cCAgW2NsYXNzIG1hdGNoIC12YWx1ZSBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6Omhvc3RdXSBlcXVhbHMgU2hhcmVkLyRzaGFyZWRUcmFmZmljRGF0YWdyb3VwXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmluZm8gIltIVFRQOjpob3N0XSB1cmkgZGF0YWdyb3VwOiAkZ2V0X3VyaV9kYXRhZ3JvdXAifQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYge1tpbmZvIGV4aXN0cyBnZXRfdXJpX2RhdGFncm91cF19IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB7W2NsYXNzIG1hdGNoIFtzdHJpbmcgdG9sb3dlciBbSFRUUDo6aG9zdF1dIGVxdWFscyBTaGFyZWQvJHNoYXJlZFRyYWZmaWNEYXRhZ3JvdXBdICYmIFtjbGFzcyBtYXRjaCBbc3RyaW5nIHRvbG93ZXIgW0hUVFA6OnVyaV1dIHN0YXJ0c193aXRoIFNoYXJlZC8kZ2V0X3VyaV9kYXRhZ3JvdXBdfSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiB7ICRzdGF0aWM6OmV4cGxpY2l0SFRUUFNfZGVidWcgfSB7bG9nIGxvY2FsMC5kZWJ1ZyAiW0hUVFA6Omhvc3RdIE1hdGNoZWQgd2hpdGVMaXN0In0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9odHRwc3doaXRlbGlzdEhvc3QgIndoaXRlbGlzdEhvc3Q9XCJBQ0NFUFRFRFwiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgaHNsX2h0dHBzd2hpdGVsaXN0VVJJICJ3aGl0ZWxpc3RVUkk9XCJBTExPV0VEXCIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNIVFRQOjpoZWFkZXIgaW5zZXJ0IFgtUmVhbC1JUCBbSVA6OnJlbW90ZV9hZGRyIGNsaWVudHNpZGVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgZG90SW5kZXggW3N0cmluZyBmaXJzdCAiLiIgJGhvc3ROYW1lIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBzdGFySG9zdE5hbWUgW3N0cmluZyByZXBsYWNlICRob3N0TmFtZSAwICRkb3RJbmRleCAiIy4iXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cgbG9jYWwwLmluZm8gIlJFUExBQ0VELjogJHN0YXJIb3N0TmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGdldF91cmlfZGF0YWdyb3VwICBbY2xhc3MgbWF0Y2ggLXZhbHVlIFtzdHJpbmcgdG9sb3dlciAkc3Rhckhvc3ROYW1lXSBlcXVhbHMgU2hhcmVkLyRzaGFyZWRUcmFmZmljRGF0YWdyb3VwXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB7W2NsYXNzIG1hdGNoIFtzdHJpbmcgdG9sb3dlciAkc3Rhckhvc3ROYW1lXSBlcXVhbHMgU2hhcmVkLyRzaGFyZWRUcmFmZmljRGF0YWdyb3VwXSAmJiBbY2xhc3MgbWF0Y2ggW3N0cmluZyB0b2xvd2VyIFtIVFRQOjp1cmldXSBzdGFydHNfd2l0aCBTaGFyZWQvJGdldF91cmlfZGF0YWdyb3VwXX0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHtsb2cgbG9jYWwwLmRlYnVnICJbSFRUUDo6aG9zdF0gTWF0Y2hlZCB3aGl0ZUxpc3QifQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9odHRwc3doaXRlbGlzdEhvc3QgIndoaXRlbGlzdEhvc3Q9XCJBQ0NFUFRFRFwiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0IGhzbF9odHRwc3doaXRlbGlzdFVSSSAid2hpdGVsaXN0VVJJPVwiQUxMT1dFRFwiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI0hUVFA6OmhlYWRlciBpbnNlcnQgWC1SZWFsLUlQIFtJUDo6cmVtb3RlX2FkZHIgY2xpZW50c2lkZV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhTTDo6c2VuZCAkaHNsaHR0cHMgIkZhaWxlZCB0byBtYXRjaCBIb3N0IHdpdGggVVJJIGluIHNoYXJlZCBkYXRhZ3JvdXAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgNDAzcmVzcG9uc2UgMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSFNMOjpzZW5kICRoc2xodHRwcyAiVW5hYmxlIHRvIG1hcCBob3N0bmFtZSBkYXRhZ3JvdXAgdG8gVVJJIHNoYXJlZCBkYXRhIGdyb3VwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCA0MDNyZXNwb25zZSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIU0w6OnNlbmQgJGhzbGh0dHBzICJTaGFyZWQgZGF0YSBncm91cCBwb2xpY3kgZG9lc24ndCBleGlzdCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCA0MDNyZXNwb25zZSAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhTTDo6c2VuZCAkaHNsaHR0cHMgIlNoYXJlZCBkYXRhIGdyb3VwIHBvbGljeSBpcyBpbmNvcnJlY3QiCiAgICAgICAgICAgICAgICAgICAgICAgIHNldCA0MDNyZXNwb25zZSAxCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBIU0w6OnNlbmQgJGhzbGh0dHBzICJTb3VyY2UgSVAgZGF0YSBncm91cCBwb2xpY3kgZG9lc24ndCBleGlzdCIKICAgICAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgICAgICB9CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBIU0w6OnNlbmQgJGhzbGh0dHBzICJVbmFibGUgdG8gc2V0IHZhcmlhYmxlLCBzb3VyY2VDbGllbnQuIFRDUCBvcHRpb24gMjggaGVhZGVyIHdhcyBtaXNzaW5nIG9yIHVuYWJsZSB0byBkZWNvZGUiCiAgICAgICAgc2V0IDQwM3Jlc3BvbnNlIDEKICAgIH0KICAgIGlmIHskNDAzcmVzcG9uc2UgPT0gMX0gewogICAgICAgIHNldCBoc2xfaHR0cHN3aGl0ZWxpc3RVUkkgIndoaXRlbGlzdFVSST1cIk5PVF9FVkFMVUFURURcIiIKICAgICAgICBzZXQgaHNsX2h0dHBzd2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkRFTklFRFwiIgogICAgICAgIHNldCBoc2xfaHR0cHNodHRwUmVzcG9uc2UgImh0dHBTdGF0dXM9XCI0MDNcIiIKICAgICAgICBIVFRQOjpjbG9zZQogICAgICAgIEhUVFA6OnJlc3BvbmQgNDAzCiAgICAgICAgSFNMOjpzZW5kICRoc2xodHRwcyAiJGhzbF9odHRwc2NsaWVudEFjY2VwdCwkaHNsX2h0dHBzY2xpZW50c3NsaGFuZHNoYWtlLCRoc2xfaHR0cHNodHRwUmVxdWVzdCwkaHNsX2h0dHBzaHR0cFJlc3BvbnNlLCRoc2xfaHR0cHN3aGl0ZWxpc3RIb3N0LCRoc2xfaHR0cHN3aGl0ZWxpc3RVUkkiCiAgICAgICAgaWYgeyAkc3RhdGljOjpleHBsaWNpdEhUVFBTX2RlYnVnIH0geyBsb2cgbG9jYWwwLmRlYnVnICIkaHNsX2h0dHBzY2xpZW50QWNjZXB0LCRoc2xfaHR0cHNjbGllbnRzc2xoYW5kc2hha2UsJGhzbF9odHRwc2h0dHBSZXF1ZXN0LCRoc2xfaHR0cHNodHRwUmVzcG9uc2UsJGhzbF9odHRwc3doaXRlbGlzdEhvc3QsJGhzbF9odHRwc3doaXRlbGlzdFVSSSJ9CiAgICB9Cn0Kd2hlbiBIVFRQX1JFU1BPTlNFIHsKICAgIHNldCBjb250ZW50TGVuZ3RoQ2hlY2sgMAogICAgaWYge1tjbGFzcyBtYXRjaCAibm9oIiBlcXVhbHMgU2hhcmVkLyRzcmNEYXRhZ3JvdXAgXX0gewogICAgICAgIHNldCBjb250ZW50TGVuZ3RobWluIFtjbGFzcyBtYXRjaCAtdmFsdWUgImNvbnRlbnRMZW5NaW4iIGVxdWFscyBTaGFyZWQvJHNyY0RhdGFncm91cCBdCiAgICAgICAgc2V0IGNvbnRlbnRMZW5ndGhtYXggW2NsYXNzIG1hdGNoIC12YWx1ZSAiY29udGVudExlbk1heCIgZXF1YWxzIFNoYXJlZC8kc3JjRGF0YWdyb3VwIF0KICAgICAgICBpZiB7bm90KFtIVFRQOjpoZWFkZXIgIkNvbnRlbnQtTGVuZ3RoIl0gPj0gJGNvbnRlbnRMZW5ndGhtaW4gYW5kIFtIVFRQOjpoZWFkZXIgIkNvbnRlbnQtTGVuZ3RoIl0gPD0gJGNvbnRlbnRMZW5ndGhtYXgpfSB7CiAgICAgICAgICAgIHNldCBjb250ZW50TGVuZ3RoQ2hlY2sgMQogICAgICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0SFRUUFNfZGVidWcgfSB7IGxvZyBsb2NhbDAuZGVidWcgIkNvbnRlbnQtTGVuZ3RoIGhlYWRlciB3YXMgZXF1YWwgdG8gMCBvciBvdXQgb2Ygc3BlY2lmaWVkIHJhbmdlIG9yIG5vdCBwcmVzZW50IC0gZmFpbGVkIn0KICAgICAgICAgICAgbG9nIGxvY2FsMC5kZWJ1ZyAiQ29udGVudC1MZW5ndGggaGVhZGVyIHdhcyBlcXVhbCB0byAwIG9yIG91dCBvZiBzcGVjaWZpZWQgcmFuZ2Ugb3Igbm90IHByZXNlbnQgLSBmYWlsZWQiCiAgICAgICAgfQogICAgfQogICAgaWYgeyQ0MDNyZXNwb25zZSA9PSAwIGFuZCAkY29udGVudExlbmd0aENoZWNrID09IDB9IHsKICAgICAgICBzZXQgaHNsX2h0dHBzaHR0cFJlc3BvbnNlICJodHRwU3RhdHVzPVwiW0hUVFA6OnN0YXR1c11cIiIKICAgICAgICBIU0w6OnNlbmQgJGhzbGh0dHBzICIkaHNsX2h0dHBzY2xpZW50QWNjZXB0LCRoc2xfaHR0cHNjbGllbnRzc2xoYW5kc2hha2UsJGhzbF9odHRwc2h0dHBSZXF1ZXN0LCRoc2xfaHR0cHNodHRwUmVzcG9uc2UsJGhzbF9odHRwc3doaXRlbGlzdEhvc3QsJGhzbF9odHRwc3doaXRlbGlzdFVSSSIKICAgICAgICBpZiB7ICRzdGF0aWM6OmV4cGxpY2l0SFRUUFNfZGVidWcgfSB7IGxvZyBsb2NhbDAuZGVidWcgIiRoc2xfaHR0cHNjbGllbnRBY2NlcHQsJGhzbF9odHRwc2NsaWVudHNzbGhhbmRzaGFrZSwkaHNsX2h0dHBzaHR0cFJlcXVlc3QsJGhzbF9odHRwc2h0dHBSZXNwb25zZSwkaHNsX2h0dHBzd2hpdGVsaXN0SG9zdCwkaHNsX2h0dHBzd2hpdGVsaXN0VVJJIn0KICAgIH0KICAgIGVsc2UgewogICAgICAgIHNldCBoc2xfaHR0cHN3aGl0ZWxpc3RVUkkgIndoaXRlbGlzdFVSST1cIk5PVF9FVkFMVUFURURcIiIKICAgICAgICBzZXQgaHNsX2h0dHBzd2hpdGVsaXN0SG9zdCAid2hpdGVsaXN0SG9zdD1cIkRFTklFRFwiIgogICAgICAgIHNldCBoc2xfaHR0cHNodHRwUmVzcG9uc2UgImh0dHBTdGF0dXM9XCI0MDNcIiIKICAgICAgICBIVFRQOjpyZXNwb25kIDQwMwogICAgICAgIEhTTDo6c2VuZCAkaHNsaHR0cHMgIiRoc2xfaHR0cHNjbGllbnRBY2NlcHQsJGhzbF9odHRwc2NsaWVudHNzbGhhbmRzaGFrZSwkaHNsX2h0dHBzaHR0cFJlcXVlc3QsJGhzbF9odHRwc2h0dHBSZXNwb25zZSwkaHNsX2h0dHBzd2hpdGVsaXN0SG9zdCwkaHNsX2h0dHBzd2hpdGVsaXN0VVJJIgogICAgICAgIGlmIHsgJHN0YXRpYzo6ZXhwbGljaXRIVFRQU19kZWJ1ZyB9IHsgbG9nIGxvY2FsMC5kZWJ1ZyAiJGhzbF9odHRwc2NsaWVudEFjY2VwdCwkaHNsX2h0dHBzY2xpZW50c3NsaGFuZHNoYWtlLCRoc2xfaHR0cHNodHRwUmVxdWVzdCwkaHNsX2h0dHBzaHR0cFJlc3BvbnNlLCRoc2xfaHR0cHN3aGl0ZWxpc3RIb3N0LCRoc2xfaHR0cHN3aGl0ZWxpc3RVUkkifQogICAgfQp9"
        }
      },
      "telemetry_local_rule": {
        "remark": "Only required when TS is a local listener",
        "class": "iRule",
        "iRule": "when CLIENT_ACCEPTED {\n  node 127.0.0.1 6514\n}"
      },
      "telemetry_local": {
        "remark": "Only required when TS is a local listener",
        "class": "Service_TCP",
        "virtualAddresses": [
          "255.255.255.254"
        ],
        "virtualPort": 6514,
        "iRules": [
          "telemetry_local_rule"
        ]
      },
      "telemetry_pool": {
        "class": "Pool",
        "members": [
          {
            "enable": true,
            "serverAddresses": [
              "255.255.255.254"
            ],
            "servicePort": 6514
          }
        ],
        "monitors": [
          {
            "bigip": "/Common/tcp"
          }
        ]
      },
      "telemetry_pool2": {
        "class": "Pool",
        "members": [
          {
            "enable": true,
            "serverAddresses": [
              "255.255.255.254"
            ],
            "servicePort": 6514
          }
        ],
        "monitors": [
          {
            "bigip": "/Common/tcp"
          }
        ]
      },
      "telemetry_hsl": {
        "class": "Log_Destination",
        "type": "remote-high-speed-log",
        "protocol": "tcp",
        "pool": {
          "use": "telemetry_pool"
        }
      },
      "ssl_bypass_fqdn_pool": {
        "class": "Pool",
        "monitors": [
            "tcp"
        ],
        "members": [
            {
                "servicePort": 443,
                "addressDiscovery": "fqdn",
                "autoPopulate": true,
                "hostname": "example.com",
                "shareNodes": true
            }
        ]
      }
    }
  },
  "ExplicitProxy": {
    "class": "Tenant",
    "explicitProxy": {
      "class": "Application",
      "template": "generic",
      "explicitProxyVS": {
        "class": "Service_HTTP",
        "layer4": "tcp",
        "virtualAddresses": [
          {
            "use": "/Common/Shared/serviceAddress"
          }
        ],
        "profileTCP": {
          "use":"/Common/Shared/tcp_profile_opt28"
        },
        "persistenceMethods": [],
        "virtualPort": 11443,
        "profileHTTP": {
          "use": "explicitProxyhttp_profile"
        },
        "snat": "auto",
        "allowVlans": [
          {
            "bigip": "/Common/internal"
          }
        ],
        "iRules": [
          "/Common/Shared/explicitProxy_irule"
        ]
      },
      "explicitProxyhttp_profile": {
        "class": "HTTP_Profile",
        "proxyType": "explicit",
        "requestChunking": "rechunk",
        "responseChunking": "rechunk",
        "resolver": {
          "bigip": "/Common/explicitProxy_resolver"
        },
        "tunnelName": "/Common/explicitProxy_tunnel"
      },
      "explicitProxyL4_profile": {
        "class": "L4_Profile",
        "looseClose": true,
        "looseInitialization": true
      },
      "explicitProxy_HTTPS_VS": {
          "class": "Service_HTTPS",
          "layer4": "tcp",
          "redirect80": false,
          "virtualAddresses": [
              {
                  "use": "/Common/Shared/serviceAddress"
              }
          ],
          "profileTCP": {
              "use":"/Common/Shared/tcp_profile_opt28"
          },
          "persistenceMethods": [],
          "translateServerPort": false,
          "translateServerAddress": false,
          "virtualPort": 443,
          "profileHTTP": {
              "bigip": "/Common/http"
          },
          "snat": "auto",
          "allowVlans": [
              {
                  "bigip": "/Common/explicitProxy_tunnel"
              }
          ],
          "clientTLS": "clientTLS_SSL_FORWARD_PROXY",
          "serverTLS": [
              {
                  "bigip": "/Common/serverTLS_SSL_FORWARD_PROXY"
              }
          ],
          "iRules": [
              "/Common/Shared/explicitHttps_irule"
          ]
      },
      "serverTLS_SSL_FORWARD_PROXY": {
        "class": "TLS_Server",
        "remark": "something unique for each update to the datagroup",
        "certificates": [
          {
            "proxyCertificate": "SSL_FORWARD_PROXY",
            "certificate": "defaultCert"
          }
        ],
        "ciphers": "ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384",
        "forwardProxyEnabled": true,
        "forwardProxyBypassEnabled": true,
        "forwardProxyBypassAllowlist": {
          "use": "/Common/Shared/explicitPxy_bypass"
        }
      },
      "clientTLS_SSL_FORWARD_PROXY": {
        "class": "TLS_Client",
        "forwardProxyEnabled": true,
        "forwardProxyBypassEnabled": true,
        "trustCA": "none"
      },
      "SSL_FORWARD_PROXY": {
        "class": "Certificate",
        "certificate": {"bigip":"/Common/SSL_FORWARD_PROXY.crt"},
        "privateKey": {"bigip":"/Common/SSL_FORWARD_PROXY.key"},
        "chainCA": {"bigip": "/Common/SSL_FORWARD_PROXY_CHAIN.crt"}
      },
      "defaultCert": {
        "class": "Certificate",
        "certificate": {"bigip":"/Common/default.crt"},
        "privateKey": {"bigip":"/Common/default.key"}
      }
    }
  },
  "class": "ADC",
  "schemaVersion": "3.26.0",
  "label": "autoscale_ltm_withExplicitProxy",
  "id": "autoscale_ltm",
  "remark": "autoscale_ltm",
  "updateMode": "selective",
  "controls": {
    "archiveTimestamp": "2020-01-29T01:27:54.691Z"
  }
}
